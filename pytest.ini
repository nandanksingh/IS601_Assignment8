# ----------------------------------------------------------
# Author: Nandan Kumar
# Date: 10/27/2025
# Assignment-8: FastAPI Calculator
# File: pytest.ini
# ----------------------------------------------------------
# Description:
# Configuration file for pytest to organize and run
# unit, integration, and end-to-end (Playwright) tests.
# Includes automatic test discovery, coverage reporting,
# and warning suppression for cleaner CI/CD logs.
# ----------------------------------------------------------

[pytest]
# ---------------------------------------
# Test Discovery and Paths
# ---------------------------------------
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# ---------------------------------------
# Markers (for test categorization)
# ---------------------------------------
markers =
    unit: marks tests as unit tests (fast, isolated)
    integration: marks tests as integration tests (API endpoints)
    e2e: marks tests as end-to-end tests (browser automation with Playwright)
    slow: marks tests as slow (deselect with '-m "not slow"')
    fast: marks tests as fast (deselect with '-m "not fast"')

# ---------------------------------------
# Test Output and Coverage Reporting
# ---------------------------------------
addopts = -v --tb=short --cov=app --cov-report=term-missing --cov-report=html --cov-fail-under=90

# ---------------------------------------
# Warning Management
# ---------------------------------------
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::ResourceWarning
    ignore::UserWarning

# logging level for debugging
# log_level = INFO
